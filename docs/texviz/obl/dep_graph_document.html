

<!DOCTYPE html>
<html>
<head>
  <title>Dependency graph</title>
  <meta name="generator" content="plasTeX" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles/theme-white.css" />
  <link rel="stylesheet" href="styles/dep_graph.css" />
  
  <script type="text/x-mathjax-config">
  
    MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
  
  </script>

  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">  </script>


<link rel="stylesheet" href="styles/extra_styles.css" />

</head>

<body>
<header>
  <a class="toc" href="index.html">Home</a>
  <h1 id="doc_title">Dependencies</h1>
</header>
<div class="wrapper">
<div class="content">
    <div id="graph"></div>
<div id="statements">

    
    <div class="dep-modal-container" id="lem:ApxSolveLoad_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:ApxSolveLoad" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">15</span></div>
    <div class="thm_thmcontent"><p> For any approximation factor \(0 {\lt} \epsilon {\lt} 1\), and any weighted graph \((G,w)\), let \(\textrm{load}_w= \left( w_e \sum _f |b_e L^{\dagger }b_f^{\mkern -1.5mu\mathsf{T}}|\right)_{e \in E} \) be the true loads, and \(\textrm{aload}_w= \text{GetApproxLoad}(G, w, \epsilon )\) be the approximate loads computed by the algorithm when using an approximate Laplacian solver. Then with probability \(\ge 1-\frac{1}{poly(n)}\), </p>
<div class="displaymath" id="a0000000035">
  \[  (1 - \epsilon ) \cdot \textrm{load}_w(e) \le \textrm{aload}_w(e) \le (1 + \epsilon ) \cdot \textrm{load}_w(e) \qquad \text{for all $e \in E$}  \]
</div>
</div>

    <a class="latex_link" href="sec-apxlsolve.html#lem:ApxSolveLoad">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:CombinedApx_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:CombinedApx" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">14</span></div>
    <div class="thm_thmcontent"><p> Let \(a \in \mathbb {R}\) be a real number. Suppose \(x \in \mathbb {R}^\ell \) satisfies </p>
<div class="displaymath" id="a0000000031">
  \[  (1-\epsilon )\cdot a \le \text{median}(|x_1|, |x_2|, \ldots , |x_\ell |)\le (1+\epsilon )\cdot a  \]
</div>
<p> Suppose \(y \in \mathbb {R}^\ell \) is such that \(\| x - y\| _{\infty } \le \epsilon ’\), then \(y\) satisfies </p>
<div class="displaymath" id="a0000000032">
  \[  (1-\epsilon )\cdot a - \epsilon ’\le \text{median}(|y_1|, |y_2|, \ldots , |y_\ell |)\le (1+\epsilon )\cdot a + \epsilon ’ \]
</div>
</div>

    <a class="latex_link" href="sec-apxlsolve.html#lem:CombinedApx">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:InftyClose_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:InftyClose" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">11</span></div>
    <div class="thm_thmcontent"><p> Suppose we have two vectors \(x, y \in \mathbb {R}^n\) such that \(x, y \perp 1\) and \(\| x - y\| _L \le \epsilon \| y\| _L\). Then \(\| x - y\| _{\infty } \le \epsilon \cdot 2n^3\cdot \| y\| _{\infty }\). </p>
</div>

    <a class="latex_link" href="sec-apxlsolve.html#lem:InftyClose">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:InftyLLB_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:InftyLLB" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">9</span></div>
    <div class="thm_thmcontent"><p> For any \(x \in \mathbb {R}^n\) such that \(x \perp 1\), we have \(n^{-2}\cdot \| x\| _{\infty } \le \| x\| _L\). </p>
</div>

    <a class="latex_link" href="sec-apxlsolve.html#lem:InftyLLB">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:InftyLUB_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:InftyLUB" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">10</span></div>
    <div class="thm_thmcontent"><p> For any \(x \in \mathbb {R}^n\), \(\| x\| _L \le 2n\cdot \| x\| _{\infty }\). </p>
</div>

    <a class="latex_link" href="sec-apxlsolve.html#lem:InftyLUB">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:LoadLB_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:LoadLB" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">8</span></div>
    <div class="thm_thmcontent"><p> For any weighted graph \((G, w)\), the load on any edge \(e\) has the following lower bound. </p>
<div class="displaymath" id="a0000000016">
  \[  \textrm{load}_w(e) \ge \frac{2w_{e}}{nw_{\max }},  \]
</div>
<p> where \(w_{\max }\) is the maximum edge weight. </p>
</div>

    <a class="latex_link" href="sec-apxlsolve.html#lem:LoadLB">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:Localization_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:Localization" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">1</span></div>
    <div class="thm_thmcontent"><p> Let \(G\) be a graph with weights \(\{ w_e\} \). Then for any vector \(\ell \in \mathbb {R}_{\ge 0}^m\), </p>
<div class="displaymath" id="a0000000002">
  \[  \sum _{e, f \in E} \ell _e \ell _f \sqrt{w_e w_f} |b_e L_G^{\dagger }b_f^{\mkern -1.5mu\mathsf{T}}| \le \alpha _{\text{local}}\cdot \| \ell \| _2^2  \]
</div>
</div>

    <a class="latex_link" href="sec-proofOracleReturn.html#lem:Localization">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:MedianApx_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:MedianApx" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">13</span></div>
    <div class="thm_thmcontent"><p> Let \(x, y \in \mathbb {R}^\ell \) be such that \(\| x - y\| _{\infty } \le \epsilon \), where \(\ell \) is odd. Then </p>
<div class="displaymath" id="a0000000029">
  \[  \text{median}(|x_1|, |x_2|, \ldots , |x_\ell |)- \epsilon \le \text{median}(|y_1|, |y_2|, \ldots , |y_\ell |)\le \text{median}(|x_1|, |x_2|, \ldots , |x_\ell |)+ \epsilon  \]
</div>
</div>

    <a class="latex_link" href="sec-apxlsolve.html#lem:MedianApx">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:OracleReturn_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:OracleReturn" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">2</span></div>
    <div class="thm_thmcontent"><p> For any probability distribution \(p \in \Delta ^m\), the oblivious routing \(M_w\) corresponding to the electrical network with weights \(w_e = \left( p_e + \frac{1}{m} \right)^{-1}\) satisfies \(\sum _e p_e \textrm{load}_w(e) \le 2\alpha _{\text{local}}\). </p>
</div>

    <a class="latex_link" href="sec-proofOracleReturn.html#lem:OracleReturn">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:Pi_is_Projection_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:Pi_is_Projection" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">3</span></div>
    <div class="thm_thmcontent"><p> The matrix \(\Pi \) is a projection matrix. </p>
</div>

    <a class="latex_link" href="sec-proofWidthBound.html#lem:Pi_is_Projection">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:RowtoColumnInfty_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:RowtoColumnInfty" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">12</span></div>
    <div class="thm_thmcontent"><p> Let \(U\) be an \(n \times \ell \) matrix, with \(K\) being the largest value present in the matrix. Let \(\widetilde{U}\) be an approximation of \(U\) such that for every \(j \in [\ell ]\), the \(j\)-th column \(\widetilde{C}_j\) of \(\widetilde{U}\) is \(\epsilon \)-close to the \(j\)-th column \(C_j\) of \(U\) in the following sense: \(\forall j \in [\ell ], \| \widetilde{C}_j - C_j\| _{\infty } \le \epsilon \cdot \| C_j\| _{\infty }\). Then for any \(i \in [n]\), and rows \(R_i\) of \(U\) and \(\widetilde{R}_i\) of \(\widetilde{U}\), </p>
<div class="displaymath" id="a0000000026">
  \[  \|  \widetilde{R}_i - R_i \| _{\infty } \le \epsilon \cdot K \]
</div>
</div>

    <a class="latex_link" href="sec-apxlsolve.html#lem:RowtoColumnInfty">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:WidthBound_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:WidthBound" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">5</span></div>
    <div class="thm_thmcontent"><p> For any probability distribution \(p \in \Delta ^m\), the oblivious routing \(M_w\) corresponding to the electrical network with weights \(w_e = \left( p_e + \frac{1}{m} \right)^{-1}\) satisfies \(\textrm{load}_w(e) \le \sqrt{2m}\) for every edge \(e\). </p>
</div>

    <a class="latex_link" href="sec-proofWidthBound.html#lem:WidthBound">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:widthHelpfulLemma_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:widthHelpfulLemma" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">4</span></div>
    <div class="thm_thmcontent"><p> Let \(G\) be a graph with weights \(\{ w_e\} \) and let \(L\) be the Laplacian matrix associated with \(G\). For any edge \(e\), we have that </p>
<div class="displaymath" id="a0000000008">
  \[  \sum _f w_e w_f |b_e L^{\dagger }b_f ^{\mkern -1.5mu\mathsf{T}}|^2 \leq 1.  \]
</div>
</div>

    <a class="latex_link" href="sec-proofWidthBound.html#lem:widthHelpfulLemma">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:xelb_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:xelb" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">17</span></div>
    <div class="thm_thmcontent"><p> Let \(M^*\) be the routing returned by the algorithm. For any edge \(e\), </p>
<div class="displaymath" id="a0000000046">
  \[  x_e^{(T)} \ge \exp \left( \frac{T}{8\rho } \cdot \textrm{load}_{M^*}(e) \right).  \]
</div>
</div>

    <a class="latex_link" href="sec-lsolvex.html#lem:xelb">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="lem:xnormub_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="lem:xnormub" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">16</span></div>
    <div class="thm_thmcontent"><p> For any \(t \ge 1\), \(\|  x^{(t)} \| _1 \le \|  x^{(t-1)} \| _1 \cdot \exp (2 \alpha _{\text{local}}/\rho )\). At the end of the algorithm, \(\|  x^{(T)} \| _1 \le m \cdot \exp (2\alpha _{\text{local}}T/\rho )\). </p>
</div>

    <a class="latex_link" href="sec-lsolvex.html#lem:xnormub">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="thm:CompRatio_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="thm:CompRatio" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">18</span></div>
    <div class="thm_thmcontent"><p> The routing returned by the algorithm has competitive ratio \(O(\alpha _{\text{local}})\). </p>
</div>

    <a class="latex_link" href="sec-lsolvex.html#thm:CompRatio">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="thm:LapSolve_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="thm:LapSolve" style="display: none">
    <div class="thm_thmheading">
      <span class="theorem_thmcaption">
      Theorem
      </span>
      <span class="theorem_thmlabel">6</span></div>
    <div class="thm_thmcontent"><p> There is an algorithm \(\text{ApproxLapSolve}\) that gets as input a Laplacian \(L\) of an \(n\)-vertex \(m\)-edge graph, a vector \(y \in \mathbb {R}^n\), error bound \(\epsilon _L\), and returns a vector \(x \in \mathbb {R}^n\) such that the following holds with probability \(\ge 1 - \frac{1}{poly(n)}\). </p>
<div class="displaymath" id="a0000000014">
  \[  \| x - L^{\dagger }y\| _L \le \epsilon _L\cdot \| L^{\dagger }y\| _L  \]
</div>
<p> where \(\| x\| _L = \sqrt{x^{\mkern -1.5mu\mathsf{T}}L x} \) is the norm induced by the Laplacian. Further, the algorithm runs in time \(\widetilde{O}(m \log (1/\epsilon _L))\). </p>
</div>

    <a class="latex_link" href="sec-apxlsolve.html#thm:LapSolve">LaTeX</a>
  </div>
    
      </div>
    </div>


    
    <div class="dep-modal-container" id="thm:SketchApprox_modal">
      <div class="dep-modal-content">
          <button class="dep-closebtn">
<svg  class="icon icon-cross "><use xlink:href="symbol-defs.svg#icon-cross"></use></svg>
</button>
        
  <div class="thm" id="thm:SketchApprox" style="display: none">
    <div class="thm_thmheading">
      <span class="lemma_thmcaption">
      Lemma
      </span>
      <span class="lemma_thmlabel">7</span></div>
    <div class="thm_thmcontent"><p> Given \(m \in \mathbb {Z}_{\ge 1}\), \(\delta \in (0,1)\), and \(\epsilon \in (0, 1)\), there is a sketch matrix \(C = \text{SketchMatrix}(m, \delta , \epsilon ) \in \mathbb {R}^{\ell \times m}\) and an algorithm \(\text{RecoverNorm}(s)\) for \(s \in \mathbb {R}^{\ell }\) such that the following properties hold: </p>
<ul class="itemize">
  <li><p>(Approximation) For any \(v \in \mathbb {R}^m\), with probability at least \(1 - \delta \) over the randomness of SketchMatrix, the value of \(r = \text{RecoverNorm}(Cv)\) is </p>
<div class="displaymath" id="a0000000015">
  \[  (1-\epsilon ) \| v\| _1 \le r \le (1+\epsilon ) \| v\| _1  \]
</div>
</li>
  <li><p>\(\ell = c/\epsilon ^2 \cdot \log (1/\delta )\) for some constant \(c{\gt}1\) </p>
</li>
  <li><p>(running time) SketchMatrix and RecoverNorm take time \(O(\ell m)\) and \(poly(\ell )\) respectively. </p>
</li>
</ul>
</div>

    <a class="latex_link" href="sec-apxlsolve.html#thm:SketchApprox">LaTeX</a>
  </div>
    
      </div>
    </div>
</div>
</div> <!-- content -->
</div> <!-- wrapper -->
<script src="js/jquery.min.js" type="text/javascript"></script>

<script src="js/d3.min.js"></script>
<script src="js/hpcc.min.js"></script>
<script src="js/d3-graphviz.js"></script>

<script type="text/javascript">
const graphContainer = d3.select("#graph");
const width = graphContainer.node().clientWidth;
const height = graphContainer.node().clientHeight;


graphContainer.graphviz({useWorker: true})
    .width(width)
    .height(height)
    .fit(true)
    .renderDot(`strict digraph "" {	graph [bgcolor=transparent];	node [label="\N",		penwidth=1.8	];	edge [arrowhead=vee];	"lem:RowtoColumnInfty"	[color=lightgray,		label=RowtoColumnInfty,		shape=ellipse,		style=filled];	"lem:ApxSolveLoad"	[color=lightgray,		label=ApxSolveLoad,		shape=ellipse,		style=filled];	"lem:RowtoColumnInfty" -> "lem:ApxSolveLoad";	"lem:CombinedApx"	[color=lightgray,		label=CombinedApx,		shape=ellipse,		style=filled];	"lem:CombinedApx" -> "lem:ApxSolveLoad";	"lem:xelb"	[color=lightgray,		label=xelb,		shape=ellipse,		style=filled];	"lem:ApxSolveLoad" -> "lem:xelb";	"lem:xnormub"	[color=lightgray,		label=xnormub,		shape=ellipse,		style=filled];	"lem:ApxSolveLoad" -> "lem:xnormub";	"thm:CompRatio"	[color=lightgray,		label=CompRatio,		shape=ellipse,		style=filled];	"lem:xelb" -> "thm:CompRatio";	"lem:Localization"	[color=lightgray,		label=Localization,		shape=ellipse,		style=filled];	"lem:OracleReturn"	[color=lightgray,		label=OracleReturn,		shape=ellipse,		style=filled];	"lem:Localization" -> "lem:OracleReturn";	"lem:Pi_is_Projection"	[color=lightgray,		label=Pi_is_Projection,		shape=ellipse,		style=filled];	"lem:widthHelpfulLemma"	[color=lightgray,		label=widthHelpfulLemma,		shape=ellipse,		style=filled];	"lem:Pi_is_Projection" -> "lem:widthHelpfulLemma";	"lem:WidthBound"	[color=lightgray,		label=WidthBound,		shape=ellipse,		style=filled];	"lem:WidthBound" -> "lem:xelb";	"lem:widthHelpfulLemma" -> "lem:WidthBound";	"lem:OracleReturn" -> "lem:xnormub";	"thm:SketchApprox"	[color=lightgray,		label=SketchApprox,		shape=ellipse,		style=filled];	"thm:SketchApprox" -> "lem:ApxSolveLoad";	"lem:LoadLB"	[color=lightgray,		label=LoadLB,		shape=ellipse,		style=filled];	"lem:LoadLB" -> "lem:ApxSolveLoad";	"lem:InftyLLB"	[color=lightgray,		label=InftyLLB,		shape=ellipse,		style=filled];	"lem:InftyClose"	[color=lightgray,		label=InftyClose,		shape=ellipse,		style=filled];	"lem:InftyLLB" -> "lem:InftyClose";	"lem:InftyLUB"	[color=lightgray,		label=InftyLUB,		shape=ellipse,		style=filled];	"lem:InftyLUB" -> "lem:InftyClose";	"lem:InftyClose" -> "lem:ApxSolveLoad";	"lem:MedianApx"	[color=lightgray,		label=MedianApx,		shape=ellipse,		style=filled];	"lem:MedianApx" -> "lem:CombinedApx";	"lem:xnormub" -> "thm:CompRatio";	"thm:LapSolve"	[color=lightgray,		label=LapSolve,		shape=ellipse,		style=filled];}`)
    .on("end", function () {
        console.log(graphContainer.node().innerHTML);
        interactive();
    });

function interactive() {
  d3.selectAll('.node')
    .attr('pointer-events', 'fill')
    .on('click', function () {
      // Reset the fill color for all nodes and edges to grey
      d3.selectAll('.node').select('ellipse').attr('fill', 'lightgray').attr('stroke', 'lightgray');

      var title = d3.select(this).selectAll('title').text().trim();
      $('#statements > div').hide();
      $('.thm').hide();
      $('#'+title.replace(':', '\\:')+'_modal').show().children().show().children().show();
      $('#statements').show();

      // Find out-neighbors and change the fill of their nodes and edges to blue
      var inNeighborEdges = d3.selectAll('.edge')
        .filter(function(edge) {
          return d3.select(this).select('title').text().split('->')[1].trim() === title;
        });

      var inNeighborNodes = inNeighborEdges.data().map(edge => edge.key.split('->')[0]);
      d3.selectAll('.node')
        .filter(function(node) {
          var nodeTitle = d3.select(this).select('title').text().trim();
          return inNeighborNodes.includes(nodeTitle);
        })
        .select('ellipse')
        .attr('stroke', 'lightblue')
        .attr('fill', 'lightblue');

      // Log information about out-neighbors
      console.log("Inneighbors:", inNeighborNodes);
    });

  d3.selectAll('.dep-closebtn').on('click', function() {
    var modal = d3.select(this).node().parentNode.parentNode.parentNode;
    d3.select(modal).style('display', 'none');
  });
}

</script>

</body>
</html>
